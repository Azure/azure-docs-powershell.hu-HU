---
title: Azure PowerShell-szkriptek áttelepítése az AzureRM modulból az Az modulba
description: Ismerje meg a szkriptek az AzureRM modulból az új Az modulba való áttelepítésére szolgáló lépéseket és eszközöket.
ms.devlang: powershell
ms.topic: conceptual
ms.date: 05/10/2019
ms.custom: devx-track-azurepowershell
ms.openlocfilehash: 83860dd5abfbb1c3da94de6813bceca1bbb0fca7
ms.sourcegitcommit: 8b3126b5c79f453464d90669f0046ba86b7a3424
ms.translationtype: HT
ms.contentlocale: hu-HU
ms.lasthandoff: 09/01/2020
ms.locfileid: "89244347"
---
# <a name="migrate-azure-powershell-from-azurerm-to-az"></a><span data-ttu-id="7ae44-103">Az Azure PowerShell migrálása az AzureRM modulból az Az modulba</span><span class="sxs-lookup"><span data-stu-id="7ae44-103">Migrate Azure PowerShell from AzureRM to Az</span></span>

<span data-ttu-id="7ae44-104">Az Az modul a funkciók tekintetében paritásban van az AzureRM modullal, de rövidebb és egységesebb parancsmagneveket használ.</span><span class="sxs-lookup"><span data-stu-id="7ae44-104">The Az module has feature parity with AzureRM, but uses shorter and more consistent cmdlet names.</span></span>
<span data-ttu-id="7ae44-105">Az AzureRM-parancsmagokhoz írt szkriptek nem működnek automatikusan az új modullal.</span><span class="sxs-lookup"><span data-stu-id="7ae44-105">Scripts written for the AzureRM cmdlets won't automatically work with the new module.</span></span> <span data-ttu-id="7ae44-106">Az áttérés megkönnyítése érdekében az Az olyan eszközöket nyújt, amelyekkel futtathatja az AzureRM-et használó meglévő szkripteket.</span><span class="sxs-lookup"><span data-stu-id="7ae44-106">To make the transition easier, Az offers tools to allow you to run your existing scripts using AzureRM.</span></span> <span data-ttu-id="7ae44-107">Az új parancskészletekre való áttérés soha nem egyszerű, ebben a cikkben azonban segítünk megismerkedni az új modulra való átállás alapjaival.</span><span class="sxs-lookup"><span data-stu-id="7ae44-107">No migration to a new command set is ever convenient, but this article will help you get started on transitioning to the new module.</span></span>

<span data-ttu-id="7ae44-108">Az AzureRM és az Az közötti kompatibilitástörő változások teljes listáját [az AzureRM és az Az közötti változások teljes listájában](migrate-az-1.0.0.md) találja.</span><span class="sxs-lookup"><span data-stu-id="7ae44-108">To see the full list of breaking changes between AzureRM and Az, see the [full changes from AzureRM to Az](migrate-az-1.0.0.md).</span></span>

## <a name="ensure-existing-scripts-work-with-the-latest-azurerm-release"></a><span data-ttu-id="7ae44-109">Annak ellenőrzése, hogy a meglévő szkriptek működnek-e az AzureRM legújabb kiadásával</span><span class="sxs-lookup"><span data-stu-id="7ae44-109">Ensure existing scripts work with the latest AzureRM release</span></span>

<span data-ttu-id="7ae44-110">A migrálási lépések előtt ellenőrizze, hogy az AzureRM mely verziói vannak telepítve a rendszeren.</span><span class="sxs-lookup"><span data-stu-id="7ae44-110">Before taking any migration steps, check which versions of AzureRM are installed on your system.</span></span> <span data-ttu-id="7ae44-111">Ezzel biztosíthatja, hogy a szkriptek már a legújabb kiadáson fussanak, és megtudhatja, hogy az AzureRM mely verzióit kell eltávolítania.</span><span class="sxs-lookup"><span data-stu-id="7ae44-111">Doing so allows you to make sure scripts are already running on the latest release, and let you know which versions of AzureRM must be uninstalled.</span></span>

<span data-ttu-id="7ae44-112">Az AzureRM telepített verziója/verziói megtekintéséhez futtassa a következő parancsot:</span><span class="sxs-lookup"><span data-stu-id="7ae44-112">To check which version(s) of AzureRM you have installed, run the command:</span></span>

```powershell-interactive
Get-InstalledModule -Name AzureRM -AllVersions
```

<span data-ttu-id="7ae44-113">Az AzureRM __legújabb__ elérhető kiadása a __6.13.1-es__.</span><span class="sxs-lookup"><span data-stu-id="7ae44-113">The __latest__ available release of AzureRM is __6.13.1__.</span></span> <span data-ttu-id="7ae44-114">Ha nincs telepítve ez a verzió, a meglévő szkripteknek további módosításra lehet szükségük ahhoz, hogy az itt és a [kompatibilitástörő változások listájában](migrate-az-1.0.0.md) leírtakon kívül használni lehessen őket az Az modullal.</span><span class="sxs-lookup"><span data-stu-id="7ae44-114">If you don't have this version installed, your existing scripts may need additional modification to work with the Az module beyond what's described here and in the [breaking changes list](migrate-az-1.0.0.md).</span></span>

<span data-ttu-id="7ae44-115">Ha a szkriptek nem működnek az AzureRM 6.13.1-es verziójával, frissítse őket az [AzureRM 5.x és 6.x migrálási útmutatója](/powershell/azure/azurerm/migration-guide.6.0.0) szerint.</span><span class="sxs-lookup"><span data-stu-id="7ae44-115">If your scripts don't work with AzureRM 6.13.1, update them according to the [AzureRM 5.x to 6.x migration guide](/powershell/azure/azurerm/migration-guide.6.0.0).</span></span>
<span data-ttu-id="7ae44-116">Ha az AzureRM modul korábbi verzióját használja, mindegyik fő verzióhoz elérhető migrálási útmutató.</span><span class="sxs-lookup"><span data-stu-id="7ae44-116">If you use an earlier version of the AzureRM module, there are migration guides available for each major version.</span></span>

## <a name="uninstall-azurerm"></a><span data-ttu-id="7ae44-117">Az AzureRM eltávolítása</span><span class="sxs-lookup"><span data-stu-id="7ae44-117">Uninstall AzureRM</span></span>

<span data-ttu-id="7ae44-118">Nem garantált, hogy az Az modul kompatibilis lesz a meglévő, telepített AzureRM-mel a Windows PowerShell 5.1-ben.</span><span class="sxs-lookup"><span data-stu-id="7ae44-118">The Az module is not guaranteed to be compatible with any existing AzureRM installs in PowerShell 5.1 for Windows.</span></span> <span data-ttu-id="7ae44-119">Az Az modul telepítése előtt [távolítsa el az AzureRM-et](/powershell/azure/uninstall-az-ps#uninstall-the-azurerm-module).</span><span class="sxs-lookup"><span data-stu-id="7ae44-119">Before you install the Az module, [uninstall AzureRM](/powershell/azure/uninstall-az-ps#uninstall-the-azurerm-module).</span></span>

> [!IMPORTANT]
>
> <span data-ttu-id="7ae44-120">Ha nem áll készen arra, hogy eltávolítsa az AzureRM modult a rendszerből, a [PowerShell Core](/powershell/scripting/install/installing-powershell-core-on-windows) 6.x vagy újabb verziójához is telepítheti az Az modult.</span><span class="sxs-lookup"><span data-stu-id="7ae44-120">If you're not ready to remove the AzureRM module from your system, you can install the Az module for [PowerShell Core](/powershell/scripting/install/installing-powershell-core-on-windows) 6.x or later instead.</span></span> <span data-ttu-id="7ae44-121">A PowerShell Core és a Windows PowerShell 5.1 különböző modultárat használ, így nem lesznek ütközések.</span><span class="sxs-lookup"><span data-stu-id="7ae44-121">PowerShell Core and PowerShell 5.1 for Windows use different module libraries, so there will be no conflicts.</span></span> <span data-ttu-id="7ae44-122">Ettől még [engedélyezheti az aliasokat](#enable-azurerm-compatibility-aliases) a PowerShell Core-ban.</span><span class="sxs-lookup"><span data-stu-id="7ae44-122">You can still [enable aliases](#enable-azurerm-compatibility-aliases) in PowerShell Core.</span></span>

## <a name="install-the-azure-powershell-az-module"></a><span data-ttu-id="7ae44-123">Az Azure PowerShell Az modul telepítése</span><span class="sxs-lookup"><span data-stu-id="7ae44-123">Install the Azure PowerShell Az module</span></span>

<span data-ttu-id="7ae44-124">Az első lépés az Az modul telepítése a platformra.</span><span class="sxs-lookup"><span data-stu-id="7ae44-124">The first step is to install the Az module on your platform.</span></span> <span data-ttu-id="7ae44-125">Az Az telepítésekor ajánlott eltávolítani az AzureRM-et.</span><span class="sxs-lookup"><span data-stu-id="7ae44-125">When you install Az, it's recommended that you uninstall AzureRM.</span></span> <span data-ttu-id="7ae44-126">A következő lépésekben bemutatjuk, hogyan futtathatja továbbra is meglévő szkriptjeit, és hogyan biztosíthatja a régi parancsmagnevek kompatibilitását.</span><span class="sxs-lookup"><span data-stu-id="7ae44-126">In the following steps, you'll learn how to keep running your existing scripts and enable compatibility for old cmdlet names.</span></span>

<span data-ttu-id="7ae44-127">Az Azure PowerShell Az moduljának telepítéséhez kövesse az [Az modul telepítése](install-az-ps.md) című szakaszban leírt utasításokat.</span><span class="sxs-lookup"><span data-stu-id="7ae44-127">To install the Azure PowerShell Az module, follow the instructions in [Install the Az module](install-az-ps.md).</span></span>

> [!NOTE]
> <span data-ttu-id="7ae44-128">Ekkor érdemes lehet futtatni az Az modulban található [Uninstall-AzureRM](/powershell/module/az.accounts/uninstall-azurerm) parancsmagot, hogy meggyőződjön arról, hogy az AzureRM összes verziója el lett távolítva, és nem fog ütközéseket okozni.</span><span class="sxs-lookup"><span data-stu-id="7ae44-128">At this point, you might want to run the [Uninstall-AzureRM](/powershell/module/az.accounts/uninstall-azurerm) cmdlet provided in the Az module, just to make sure that all versions of AzureRM have been uninstalled and won't cause conflicts.</span></span>

## <a name="enable-azurerm-compatibility-aliases"></a><span data-ttu-id="7ae44-129">Az AzureRM kompatibilitási aliasok engedélyezése</span><span class="sxs-lookup"><span data-stu-id="7ae44-129">Enable AzureRM compatibility aliases</span></span>

<span data-ttu-id="7ae44-130">Miután az AzureRM-et eltávolította, és megbizonyosodott róla, hogy a szkriptek működnek az AzureRM legfrissebb verziójával, a következő lépés az Az modul kompatibilitási módjának engedélyezése.</span><span class="sxs-lookup"><span data-stu-id="7ae44-130">With AzureRM uninstalled and your scripts working with the latest AzureRM version, the next step is to enable the compatibility mode for the Az module.</span></span> <span data-ttu-id="7ae44-131">A kompatibilitás a következő paranccsal engedélyezhető:</span><span class="sxs-lookup"><span data-stu-id="7ae44-131">Compatibility is enabled with the command:</span></span>

```powershell-interactive
Enable-AzureRmAlias -Scope CurrentUser
```

<span data-ttu-id="7ae44-132">Az aliasok segítségével továbbra is használhatja a régi parancsmagneveket, ha az Az modul telepítve van.</span><span class="sxs-lookup"><span data-stu-id="7ae44-132">Aliases enable the ability to use old cmdlet names with the Az module installed.</span></span> <span data-ttu-id="7ae44-133">Az aliasok a kiválasztott hatókör profiljába lesznek írva.</span><span class="sxs-lookup"><span data-stu-id="7ae44-133">These aliases are written to the profile for the selected scope.</span></span> <span data-ttu-id="7ae44-134">Ha nincs profil, a rendszer létrehoz egyet.</span><span class="sxs-lookup"><span data-stu-id="7ae44-134">If no profile exists, one is created.</span></span>
<span data-ttu-id="7ae44-135">A `CurrentUser` értéknél nagyobb `-Scope` használatakor megfelelő engedélyek szükségesek a megfelelő profilfájl létrehozásához vagy frissítéséhez.</span><span class="sxs-lookup"><span data-stu-id="7ae44-135">When using a `-Scope` broader than `CurrentUser`, the appropriate permissions are required to create or update the corresponding profile file.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7ae44-136">__Csak__ a parancsmagok neve rendelkezik aliassal, a modulok neve nem.</span><span class="sxs-lookup"><span data-stu-id="7ae44-136">__Only__ cmdlet names are aliased - module names aren't!</span></span> <span data-ttu-id="7ae44-137">Ha `#Requires` vagy `Import-Module` utasítást, `.psd1` függőségi listáit vagy teljes parancsmagneveket használ, mindenképpen ekkor migrálja őket. Ehhez kövesse a [kompatibilitástörő változások listájában](migrate-az-1.0.0.md) ismertetett, a modulnevekre vonatkozó folyamatokat.</span><span class="sxs-lookup"><span data-stu-id="7ae44-137">If you're using `#Requires`, `Import-Module`, dependency lists in a `.psd1`, or fully-qualified cmdlet names, make sure that you migrate them at this point by following the process outlined in the [breaking changes list](migrate-az-1.0.0.md) regarding module names.</span></span>

> [!WARNING]
>
> <span data-ttu-id="7ae44-138">Használhat más hatókört (`-Scope`) is a parancsban, ez azonban nem ajánlott.</span><span class="sxs-lookup"><span data-stu-id="7ae44-138">You can use a different `-Scope` for this command, but it's not recommended.</span></span> <span data-ttu-id="7ae44-139">Ezek az aliasok a kiválasztott hatókör felhasználói profiljába lesznek írva, ezért érdemes őket minél korlátozottabb hatókörhöz engedélyezni.</span><span class="sxs-lookup"><span data-stu-id="7ae44-139">Aliases are written to the user profile for the selected scope, so keep enabling them to as limited a scope as possible.</span></span> <span data-ttu-id="7ae44-140">Az aliasok rendszerszintű engedélyezése emellett a többi felhasználónak is problémát okozhat, akiknél az AzureRM van telepítve a helyi hatókörükben.</span><span class="sxs-lookup"><span data-stu-id="7ae44-140">Enabling aliases system-wide can cause issues for other users who have AzureRM installed in their local scope.</span></span>

<span data-ttu-id="7ae44-141">Az alias mód engedélyezése után futtassa újra a szkripteket, és győződjön meg róla, hogy továbbra is a vártnak megfelelően működnek.</span><span class="sxs-lookup"><span data-stu-id="7ae44-141">Once the alias mode is enabled, run your scripts again to confirm that they still function as expected.</span></span>
<span data-ttu-id="7ae44-142">Néhány paraméter neve módosult, hozzá lett adva vagy szükségessé vált az Az modulhoz.</span><span class="sxs-lookup"><span data-stu-id="7ae44-142">Some parameter names have been changed, added, or made required by the Az module.</span></span> <span data-ttu-id="7ae44-143">Előfordulhat, hogy a parancsmagok kimeneti típusa is megváltozott.</span><span class="sxs-lookup"><span data-stu-id="7ae44-143">Output types of cmdlets may have changed as well.</span></span> <span data-ttu-id="7ae44-144">A változások részletes leírása a [kompatibilitástörő változások listájában](migrate-az-1.0.0.md) található.</span><span class="sxs-lookup"><span data-stu-id="7ae44-144">These changes are detailed in the [breaking changes list](migrate-az-1.0.0.md).</span></span>

## <a name="update-cmdlets-modules-and-parameters"></a><span data-ttu-id="7ae44-145">Parancsmagok, modulok és paraméterek frissítése</span><span class="sxs-lookup"><span data-stu-id="7ae44-145">Update cmdlets, modules, and parameters</span></span>

<span data-ttu-id="7ae44-146">Ha frissítette a szkripteket, és aliasokkal futtatja őket, akkor szánjon időt arra, hogy frissítse őket az új parancsmagok használatához és a többi módosítás, például az új funkciók előnyeinek kihasználásához.</span><span class="sxs-lookup"><span data-stu-id="7ae44-146">With scripts updated and running under aliases, you can take your time to update them to use the new cmdlets and take advantage of other changes like new features.</span></span> <span data-ttu-id="7ae44-147">A legtöbb szkript esetében csak a parancsmagneveket kell frissíteni, [az Az új parancsmag-elnevezési sémája szerint](migrate-az-1.0.0.md#cmdlet-noun-prefix-changes).</span><span class="sxs-lookup"><span data-stu-id="7ae44-147">For most scripts, you will only need to update cmdlet names, [following the new cmdlet naming scheme in Az](migrate-az-1.0.0.md#cmdlet-noun-prefix-changes).</span></span> <span data-ttu-id="7ae44-148">Előfordulhat, hogy néhány további módosítást is el kell végeznie ahhoz, hogy a szkriptek működjenek, attól függően, hogy mire valók, és az Azure PowerShell mely funkcióit használják.</span><span class="sxs-lookup"><span data-stu-id="7ae44-148">There may also be some other changes that you need to make in order to have your scripts work, depending on what they do and which Azure PowerShell features they take advantage of.</span></span>

<span data-ttu-id="7ae44-149">Például ha a [Blob Storage-parancsmagokat](migrate-az-1.0.0.md#azstorage-previously-azurestorage-and-azurermstorage) teljesen átdolgozták, hogy egy új, aszinkron modellt használjanak, az ezeket használó szkriptek frissítése több munkával fog járni, mint azoké a szkripteké, amelyeknél csak a parancsmagnevek terén történt lényeges változás.</span><span class="sxs-lookup"><span data-stu-id="7ae44-149">For example, the [Blob Storage cmdlets](migrate-az-1.0.0.md#azstorage-previously-azurestorage-and-azurermstorage) have been completely reworked to use a new asynchronous model, so scripts using them will take more work to update than those where the only relevant changes were cmdlet names.</span></span>

<span data-ttu-id="7ae44-150">Ha eddig csak kisebb, egyszerű módosításokat kellett végrehajtania a szkripteken, vagy ha azok az aliasok engedélyezésekor további módosítások nélkül is működnek, akkor is tekintse át az [Az 1.0.0 kompatibilitástörő változásainak teljes listáját](migrate-az-1.0.0.md), hogy meggyőződjön arról, hogy nem támaszkodik az aliasok „átlátható” viselkedésére, ami a parancsmagnevek módosítása és az aliasok letiltása után megszűnhet.</span><span class="sxs-lookup"><span data-stu-id="7ae44-150">Even if you've only had to make small, simple changes to your scripts up to this point - or they even work without additional modification when aliases are enabled -  read the [full list of breaking changes in Az 1.0.0](migrate-az-1.0.0.md) to make sure that you're not relying on 'transparent' behavior of aliases which could disappear after you change cmdlet names and disable aliases.</span></span>

## <a name="disable-aliases"></a><span data-ttu-id="7ae44-151">Aliasok letiltása</span><span class="sxs-lookup"><span data-stu-id="7ae44-151">Disable aliases</span></span>

<span data-ttu-id="7ae44-152">Ha befejezte a migrálást, és már nem támaszkodik az aliasok viselkedésére, javasoljuk, hogy tiltsa le az aliasokat.</span><span class="sxs-lookup"><span data-stu-id="7ae44-152">Once you've completed your migration and are no longer relying on aliasing behavior, it's recommended that you disable aliases.</span></span> <span data-ttu-id="7ae44-153">Ezt a [Disable-AzureRmAlias](/powershell/module/az.accounts/disable-azurermalias) parancsmaggal teheti meg.</span><span class="sxs-lookup"><span data-stu-id="7ae44-153">This is done with the [Disable-AzureRmAlias](/powershell/module/az.accounts/disable-azurermalias) cmdlet.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7ae44-154">A parancsmag futtatásakor __győződjön meg arról,__ hogy minden olyan `-Scope`-hoz meghívja, amelyhez a `Enable-AzureRmAlias` meg lett hívva, különben maradhatnak olyan szkriptek a rendszerben, amelyek az aliasok viselkedésére támaszkodnak.</span><span class="sxs-lookup"><span data-stu-id="7ae44-154">When running this cmdlet, __make sure__ that you invoke it for each `-Scope` that `Enable-AzureRmAlias` was invoked for, otherwise there may still be scripts on your system relying on the aliasing behavior.</span></span>
